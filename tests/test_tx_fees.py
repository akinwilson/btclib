import pytest 

from btclib.transaction import Tx 
from io import BytesIO

tx_hex1 = (
 '0100000001813f79011acb80925dfe69b3def355fe914bd1d9'
 '6a3f5f71bf8303c6a989c7d1000000006b483045022100ed'
 '81ff192e75a3fd2304004dcadb746fa5e24c5031ccfcf213'
 '20b0277457c98f02207a986d955c6e0cb35d446a89d3f5610'
 '0f4d7f67801c31967743a9c8e10615bed01210349fc4e631e3'
 '624a545de3f89f5d8684c7b8138bd94bdd531d2e213bf016b27'
 '8afeffffff02a135ef01000000001976a914bc3b654dca7e56b'
 '04dca18f2566cdaf02e8d9ada88ac99c39800000000001976a9141'
 'c4bc762dd5423e332166702cb75f40df79fea1288ac19430600')
tx_hex2 = ('0100000002137c53f0fb48f83666fcfd2fe9f12d13e94ee109c5aeabbfa32bb9e02538f4cb000000006a473044'
           '02207e6009ad86367fc4b166bc80bf10cf1e78832a01e9bb491c6d126ee8aa436cb502200e29e6dd7708ed419cd5b'
           'a798981c960f0cc811b24e894bff072fea8074a7c4c012103bc9e7397f739c70f424aa7dcce9d2e521eb228b0ccba'
           '619cd6a0b9691da796a1ffffffff517472e77bc29ae59a914f55211f05024556812a2dd7d8df293265acd83301590'
           '10000006b483045022100f4bfdb0b3185c778cf28acbaf115376352f091ad9e27225e6f3f350b847579c702200d69'
           '177773cd2bb993a816a5ae08e77a6270cf46b33f8f79d45b0cd1244d9c4c0121031c0b0b95b522805ea9d0225b'
           '1946ecaeb1727c0b36c7e34165769fd8ed860bf5ffffffff027a958802000000001976a914a802fc56c704ce87c42'
           'd7c92eb75e7896bdc41ae88aca5515e00000000001976a914e82bd75c9c662c3f5700b33fec8a676b6e9391d588ac00000000')


test_cases = [(tx_hex1, 40000),(tx_hex2, 8800)]

@pytest.mark.parametrize('tx_hex,fee', test_cases)
def test_fee_value_extraction(tx_hex, fee):
    tx = Tx.parse(BytesIO(bytes.fromhex(tx_hex)))
    assert tx.fee() == fee, f"Expected fee {fee}, received {tx.fee()}"
